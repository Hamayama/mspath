# mspath

## 概要
- Gauche の REPL 上で、Windows のパス名をそのまま読み込むためのモジュールです。

- Windows のコマンドプロンプトで Gauche の REPL を実行している場合、  
  .scm ファイル等を、マウスでドラッグ&ドロップすると、パス名が表示されます。  
  しかし、パス名の区切りの円記号 (もしくはバックスラッシュ) は、  
  文字列のエスケープ記号と認識されるため、うまく読み込むことができません。  
  本モジュールは、このパス名をそのまま読み込むための、補助ツールとして作成したものです。


## インストール方法
- mspath.scm を Gauche でロード可能なフォルダにコピーします。  
  (例えば (gauche-site-library-directory) で表示されるフォルダ等)


## 使い方
```
  (use mspath) ; モジュールをロードします。

  (mspath)     ; 実行すると入力待ちになります。
               ; Windowsのパス名を入力すると、文字列に変換します。
               ; パス名は、ファイルをドラッグ&ドロップして入力できます(※1)。
  (msload)     ; 実行すると入力待ちになります。
               ; Windowsのパス名を入力すると、そのファイルをロードします。
               ; パス名は、ファイルをドラッグ&ドロップして入力できます(※1)。
  (msrun)      ; 実行すると入力待ちになります。
               ; Windowsのパス名を入力すると、ロードを行い、main 手続きを実行します。
               ; パス名は、ファイルをドラッグ&ドロップして入力できます(※1)。

  (mspath '(c:\work\aaa.txt))
               ; Windows のパス名(※2)を文字列に変換します。
  (msload '(c:\work\bbb.scm))
               ; Windows のパス名(※2)でロードを行います。
  (msrun  '(c:\work\ccc.scm))
               ; Windows のパス名(※2)でロードを行い、main 手続きを実行します。

  (※1)このパス名は、ダブルクォートで囲われていてもいなくてもかまいません。

  (※2)このパス名は、ダブルクォートではなくて '() で囲って渡す必要があります。
       例えば、以下のように変換されます。
         '(c:\work\aaa.txt) → "c:\\work\\aaa.txt"
```


## 注意事項
1. 引数でパス名を渡した場合には、シンボルのリストを、1個ずつ文字列に変換しています。  
   この方法では、うまく変換できないパス名が存在する可能性があります。

2. 現状、MSYS2 の mintty 上でドラッグ&ドロップすると、パス名の表記が異なるため、  
   うまく読み込むことができません。

## 環境等
- OS
  - Windows 8.1 (64bit)
- 言語
  - Gauche v0.9.4
  - Gauche v0.9.5_pre1

## 履歴
- 2016-4-21 v1.00 (初版)
- 2016-4-21 v1.01 コメント修正等
- 2016-4-23 v1.02 パス名の省略時に入力待ちになるようにした
- 2016-4-23 v1.03 正規表現一部修正


(2016-4-24)
